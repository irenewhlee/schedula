"use strict";(self.webpackChunkschedula_form=self.webpackChunkschedula_form||[]).push([[1724],{61724:function(e,n,t){t.r(n),t.d(n,{Store:function(){return U},default:function(){return W}});var r=t(93433),a=t(45987),i=t(1413),o=t(15671),c=t(43144),l=t(60136),d=t(29388),s=(t(72791),t(70737)),u=t(91082),m=t(87309),p=t(76688),h=t(83099),f=t(98583),Z=t(61431),x=t(18050),g=t(14516),v=t(81694),y=t.n(v),S=t(45005),j=t(74151),b=t(98472),C=t(82622),k=t(40447),I=t(31752),F=t(72351),w=t(92365),D=t(79286),T=t(1025),z=t.n(T),P=t(8092),A=t.n(P),E=t(26181),L=t.n(E),R=t(17805),q=t.n(R),B=t(37481),N=t(55692),$=t(80184),_=["columns","rows","description","title","removable","filename","expandable","uploadable","downloadable","removeEmpty","summary"],O=s.Z.useToken;function Q(e){return Array.isArray(e)?e.map((function(e){return e.item})):[]}function U(e){return(0,e.children)({getLocale:(0,B.useLocaleStore)().getLocale})}var W=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(e){var r;return(0,o.Z)(this,t),(r=n.call(this,e)).state.pagination={current:1,pageSize:10,showQuickJumper:!0,hideOnSinglePage:!0},r}return(0,c.Z)(t,[{key:"renderNormalArray",value:function(){var e=this;return(0,$.jsx)(U,{children:function(n){var t=n.getLocale,o=t("TableField"),c=e.props,l=c.schema,d=c.uiSchema,s=void 0===d?{}:d,v=c.errorSchema,T=c.idSchema,P=c.name,E=c.disabled,R=void 0!==E&&E,B=c.readonly,N=void 0!==B&&B,U=c.autofocus,W=void 0!==U&&U,G=c.required,M=void 0!==G&&G,J=c.registry,K=c.onBlur,V=c.onFocus,H=c.idPrefix,X=c.idSeparator,Y=void 0===X?"_":X,ee=c.rawErrors,ne=c.hideError,te=J.fields,re=J.formContext,ae=J.schemaUtils,ie=(0,i.Z)((0,i.Z)({},re),{},{parent:e}),oe=(0,i.Z)((0,i.Z)({},J),{},{formContext:ie}),ce=ie.form,le=te.SchemaField,de=(0,x.LI)(s),se=de.columns,ue=de.rows,me=void 0===ue?{}:ue,pe=de.description,he=de.title,fe=void 0===he?void 0===l.title?P:l.title:he,Ze=de.removable,xe=void 0===Ze||Ze,ge=de.filename,ve=void 0===ge?P:ge,ye=de.expandable,Se=void 0!==ye&&ye,je=de.uploadable,be=void 0===je||je,Ce=de.downloadable,ke=void 0===Ce||Ce,Ie=de.removeEmpty,Fe=void 0!==Ie&&Ie,we=de.summary,De=void 0===we?null:we,Te=(0,a.Z)(de,_),ze=l.items,Pe=Q(e.state.keyedFormData),Ae=e.canAddItem(Pe),Ee=new Set(Pe.reduce((function(e,n){return[].concat((0,r.Z)(e),(0,r.Z)(Object.keys(n)))}),[])),Le=se.filter((function(e){return!Fe||e.render||Ee.has(e.dataIndex)||Pe.some((function(n){return q()(n,e.dataIndex.replace("/","."))}))})).map((function(n){return(0,i.Z)((0,i.Z)({key:n.dataIndex},n),{},{render:function(t,r,a){var o=e.state,c=o.pagination,l=o.keyedFormData;if(void 0===l[a+=(c.current-1)*c.pageSize])return null;var d=l[a].item,u=ae.retrieveSchema(ze,d),m=v?v[a]:void 0,p=T.$id+Y+a,h=ae.toIdSchema(u,p,d,"".concat(a,"-").concat(H),Y),f=(0,i.Z)((0,i.Z)({},ie),{},{arrayItemIndex:a}),Z=(0,i.Z)((0,i.Z)({},oe),{},{formContext:f}),x=n.rows,g=void 0===x?{}:x,y=(0,i.Z)((0,i.Z)((0,i.Z)({},n),me[String(a)]),g[String(a)]);return(0,$.jsx)(le,{name:P&&"".concat(P,"-").concat(y.dataIndex,"-").concat(a),index:a,schema:u,uiSchema:(0,i.Z)((0,i.Z)({},s.items),{},{"ui:layout":{path:y.dataIndex,uiSchema:(0,i.Z)({"ui:label":"","ui:onlyChildren":!0,"ui:disabled":R||!!Se,"ui:readonly":N||!!Se},y.uiSchema)},"ui:onlyChildren":!0}),formData:d,formContext:f,errorSchema:m,idPrefix:"".concat(a,"-").concat(H),idSeparator:Y,idSchema:h,required:e.isItemRequired(u),onChange:e.onChangeForIndex(a),onBlur:K,onFocus:V,registry:Z,disabled:R,readonly:N,hideError:ne,autofocus:W&&0===a,rawErrors:ee},"".concat(P,"-").concat(a))}})})),Re=O().token;!xe||N||R||Le.push({title:function(){return Pe.length>=1?(0,$.jsx)(u.Z,{title:o.deleteAllConfirm,placement:"left",onConfirm:function(n){n&&n.preventDefault();var t=e.state.pagination,r=e.props.onChange,a=e.state.keyedFormData.filter((function(e,n){var t=(me[String(n)]||{}).removable;return!(void 0===t||t)}));e.setState((0,i.Z)((0,i.Z)({},e.state),{},{keyedFormData:a,updatedKeyedFormData:!0,pagination:(0,i.Z)((0,i.Z)({},t),{},{current:1})}),(function(){return r(Q(a),[])}))},children:(0,$.jsx)(m.ZP,{danger:!0,shape:"circle",ghost:!0,size:"small",icon:(0,$.jsx)(C.Z,{})})}):null},width:33,render:function(n,t,r){var a=(me[String(r)]||{}).removable,c=void 0===a||a;return Pe.length>=1&&c?(0,$.jsx)(u.Z,{title:o.deleteItemConfirm,placement:"left",onConfirm:function(n){var t=e.state,a=t.pagination,o=t.keyedFormData,c=1+Math.floor((o.length-2)/a.pageSize);e.onDropIndexClick(r+(a.current-1)*a.pageSize)(n),a.current>c&&e.setState((0,i.Z)((0,i.Z)({},e.state),{},{pagination:(0,i.Z)((0,i.Z)({},a),{},{current:c})}))},children:(0,$.jsx)(m.ZP,{danger:!0,shape:"circle",ghost:!0,size:"small",icon:(0,$.jsx)(C.Z,{})})}):null}});var qe,Be=ie.labelAlign,Ne=void 0===Be?"right":Be,$e=ie.rowGutter,_e=void 0===$e?24:$e,Oe=(0,x.t4)("ArrayFieldDescriptionTemplate",oe,de),Qe=(0,x.t4)("ArrayFieldTitleTemplate",oe,de),Ue=function(n,t,r){e.setState((0,i.Z)((0,i.Z)({},e.state),{},{pagination:n}))},We=function(n,t){var r=e.state,a=r.pagination,o=r.keyedFormData;if(void 0===o[t+=(a.current-1)*a.pageSize])return null;var c=o[t].item,l=ae.retrieveSchema(ze,c),d=v?v[t]:void 0,u=T.$id+Y+t,m=ae.toIdSchema(l,u,c,"".concat(t,"-").concat(H),Y),p=(0,i.Z)((0,i.Z)({},ie),{},{arrayItemIndex:t}),h=(0,i.Z)((0,i.Z)({},oe),{},{formContext:p});return(0,$.jsx)(le,{name:P&&"".concat(P,"-expand-").concat(t),index:t,schema:l,uiSchema:(0,i.Z)((0,i.Z)({},s.items),A()(Se)?Se:{}),formData:c,formContext:p,errorSchema:d,idPrefix:H,idSeparator:Y,idSchema:m,required:e.isItemRequired(l),onChange:e.onChangeForIndex(t),onBlur:K,onFocus:V,registry:h,disabled:R,readonly:N,hideError:ne,autofocus:W&&0===t,rawErrors:ee},"".concat(P,"-expand-").concat(t))},Ge=function(e){var n=e.expanded,t=e.onExpand,r=e.record;return(0,$.jsx)(m.ZP,{type:"primary",shape:"circle",ghost:!0,size:"small",icon:n?(0,$.jsx)(k.Z,{}):(0,$.jsx)(I.Z,{}),onClick:function(e){return t(r,e)}},"expand-icon")};if(null!==De){var Me=ce.compileFunc(De)(e);qe=function(){return(0,$.jsxs)(p.Z.Summary.Row,{style:{backgroundColor:L()(Re,"Table.colorFillQuaternary",Re.colorFillQuaternary),fontWeight:L()(Re,"Table.fontWeightStrong",Re.fontWeightStrong)},children:[Se?(0,$.jsx)(p.Z.Summary.Cell,{index:-1},-1):null,Le.map((function(e,n){var t=e.dataIndex;return(0,$.jsx)(p.Z.Summary.Cell,{index:n,children:L()(Me,t,null)},n)}))]})}}return(0,$.jsx)(g.ConfigConsumer,{children:function(n){var r=(0,n.getPrefixCls)("form"),a="".concat(r,"-item-label"),c=y()(a,"left"===Ne&&"".concat(a,"-left"),"ant-table-label-custom");return(0,$.jsx)(p.Z,(0,i.Z)({locale:t("Table"),caption:(0,$.jsxs)(j.Z,{justify:"space-between",align:"middle",children:[(0,$.jsx)(S.Z,{children:(0,$.jsxs)(j.Z,{gutter:_e,children:[fe&&(0,$.jsx)(S.Z,{className:c,span:24,children:(0,$.jsx)(Qe,{idSchema:T,required:M,title:fe,schema:l,uiSchema:s,registry:oe})}),(pe||l.description)&&(0,$.jsx)(S.Z,{span:24,style:{paddingBottom:"8px"},children:(0,$.jsx)(Oe,{description:pe||l.description||"",idSchema:T,schema:l,uiSchema:s,registry:oe})})]})}),(0,$.jsx)(S.Z,{children:(0,$.jsxs)(h.Z.Compact,{block:!0,size:"small",style:{padding:8},children:[N||R||!be?null:(0,$.jsx)(f.Z,{locale:t("Upload"),accept:".csv",disabled:!(!R&&!N),beforeUpload:function(n){var t=new FileReader;return t.onload=function(n){var t,r=n.target,a=z().parse(r.result,{header:!1}).data,i=se.map((function(e){return e.dataIndex})),o=se.map((function(e){return e.title}));a[0].every((function(e){return i.includes(e)}))?(t=a[0],a=a.slice(1)):a[0].every((function(e){return o.includes(e)}))?(t=a[0].map((function(e){return se.find((function(n){return n.headerName===e})).field})),a=a.slice(1)):t=se.map((function(e){return e.field})),e.props.onChange(a.map((function(e){return e.reduce((function(e,n,r){return e[t[r]]=n,e}),{})})))},t.readAsText(n),f.Z.LIST_IGNORE},children:(0,$.jsx)(Z.Z,{title:o.importTooltip,placement:"bottom",children:(0,$.jsx)(m.ZP,{type:"primary",shape:"circle",ghost:!0,disabled:!(!R&&!N),icon:(0,$.jsx)(F.Z,{})})})}),ke?(0,$.jsx)(b.CSVLink,{filename:"".concat(ve,".csv"),data:Pe,children:(0,$.jsx)(Z.Z,{title:o.exportTooltip,placement:"bottom",children:(0,$.jsx)(m.ZP,{type:"primary",shape:"circle",ghost:!0,icon:(0,$.jsx)(w.Z,{})})})}):null,Ae&&!(R||N)&&(0,$.jsx)(Z.Z,{title:o.addItemTooltip,placement:"bottom",children:(0,$.jsx)(m.ZP,{type:"primary",shape:"circle",ghost:!0,icon:(0,$.jsx)(D.Z,{}),onClick:function(n){e.onAddClick(n);var t=e.state,r=t.pagination,a=t.keyedFormData;e.setState((0,i.Z)((0,i.Z)({},e.state),{},{pagination:(0,i.Z)((0,i.Z)({},r),{},{current:1+Math.floor(a.length/r.pageSize)})}))}})})]})})]}),size:"small",expandable:Se?{expandedRowRender:We,expandIcon:Ge}:{},summary:Pe.length?qe:void 0,columns:Pe.length?Le:[],dataSource:Pe.map((function(e,n){return(0,i.Z)({key:n},e)})),pagination:e.state.pagination,onChange:Ue},Te),T.$id)}},T.$id)}})}}]),t}(N.Z)}}]);
//# sourceMappingURL=1724.71fd44dc.chunk.js.map