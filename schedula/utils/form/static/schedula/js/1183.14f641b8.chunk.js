(self.webpackChunkschedula_form=self.webpackChunkschedula_form||[]).push([[1183],{10590:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(74165),o=t(15861),i=t(1413),c=t(29439),a=t(65323),s=t(79286),u=t(6314),l=t(37481),d=t(32808),f=t.n(d),m=t(72791),p=t(10916),h=t(14692),v=t(49998),Z=t(83099),y=t(87309),x=t(45863),j=t(49389),g=t(18050),w=t(90868),C=t(18111),k=t.n(C),b=t(80184);function S(e){var n=e.uiSchema,t=e.formData,d=e.formContext.form,C=(0,(0,l.useLocaleStore)().getLocale)("CloudUploadField"),S=(0,g.LI)(n),L=S.cloudUrl,E=void 0===L?"/item":L,P=S.button,A=void 0!==P&&P,N=S.onSave,T=S.modal,H=S.currentKey,U=(0,m.useState)(!(A||T)),D=(0,c.Z)(U,2),F=D[0],O=D[1],z=(0,i.Z)({open:F,onCancel:function(){O(!1)}},T),I=p.Z.useForm(),M=(0,c.Z)(I,1)[0],V=(0,m.useState)(null),W=(0,c.Z)(V,2),_=W[0],q=W[1],B=(0,m.useState)(!1),G=(0,c.Z)(B,2),K=G[0],R=G[1],J=function(e,n,r,o){var i=f().stringify({name:r}),a=void 0===o?E:"".concat(E,"/").concat(o);return(0,w.Z)({url:"".concat(a,"?").concat(i),data:e,form:d,method:n}).then((function(e){var n=e.data,r=e.messages;if(R(!1),r&&r.forEach((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];d.props.notify({type:t,message:r})})),n.error)d.props.notify({message:C.errorTitle,description:(n.errors||[n.error]).join("\n")});else{var o=n.id,i=n.name;q({id:o,name:i}),z.onCancel(),N&&N({id:o,name:i,data:t})}})).catch((function(e){R(!1),d.props.notify({message:C.errorTitle,description:e.message})}))},Q=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.validateFields();case 3:o=e.sent,void 0!==n?J(t,"PUT",o["new-name"],n):J(t,"POST",o["new-name"]),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){k()(H,_)||q(H)}),[H]);var X=(0,b.jsx)(p.Z,{form:M,component:!1,children:(0,b.jsx)(h.Z,{spinning:K,children:(0,b.jsx)(v.Z,(0,i.Z)((0,i.Z)({title:C.titleSaveNew,footer:(0,b.jsxs)("div",{style:{display:"flex"},children:[_?(0,b.jsxs)(Z.Z,{style:{flex:"auto",minWidth:0},children:[(0,b.jsx)(y.ZP,{type:"primary",ghost:!0,icon:(0,b.jsx)(a.Z,{}),onClick:function(){Q(_.id)},children:C.buttonOverwrite}),(0,b.jsxs)(x.Z.Text,{keyboard:!0,children:["# ",_.id," - ",_.name]})]},"left"):(0,b.jsx)("div",{style:{flex:"auto",minWidth:0}}),(0,b.jsx)("div",{style:{paddingLeft:"16px"},children:(0,b.jsxs)(Z.Z,{children:[(0,b.jsx)(y.ZP,{type:"primary",ghost:!0,icon:(0,b.jsx)(s.Z,{}),onClick:function(){Q()},children:C.buttonSaveNew}),(0,b.jsx)(y.ZP,{type:"primary",ghost:!0,onClick:function(){z.onCancel()},children:C.buttonCancel})]})})]})},z),{},{children:(0,b.jsx)(p.Z.Item,{name:"new-name",label:C.titleName,style:{margin:0},rules:[{required:!0,message:C.fieldErrors.name}],children:(0,b.jsx)(j.Z,{})})}))})},"form");return A?[(0,b.jsx)(y.ZP,(0,i.Z)({icon:(0,b.jsx)(u.Z,{}),type:"primary",shape:"circle",onClick:function(){return O(!0)}},A),"button"),X]:X}},6314:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(1413),o=t(72791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},c=t(54291),a=function(e,n){return o.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:i}))};a.displayName="CloudUploadOutlined";var s=o.forwardRef(a)},1325:function(e,n,t){"use strict";t.d(n,{N:function(){return r}});var r=function(e){return{color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}}},42748:function(e,n,t){"use strict";t.d(n,{G:function(){return c}});var r=t(14937),o=function(e){if((0,r.Z)()&&window.document.documentElement){var n=Array.isArray(e)?e:[e],t=window.document.documentElement;return n.some((function(e){return e in t.style}))}return!1},i=function(e,n){if(!o(e))return!1;var t=document.createElement("div"),r=t.style[e];return t.style[e]=n,t.style[e]!==r};function c(e,n){return Array.isArray(e)||void 0===n?o(e):i(e,n)}},24654:function(){}}]);
//# sourceMappingURL=1183.14f641b8.chunk.js.map