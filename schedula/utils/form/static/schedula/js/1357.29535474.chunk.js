"use strict";(self.webpackChunkschedula_form=self.webpackChunkschedula_form||[]).push([[1357],{21357:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(1413),o=r(74165),a=r(93433),i=r(15861),c=r(29439),s=r(72351),l=r(61431),u=r(95562),d=r(98583),p=r(87309),m=r(11172),f=r.n(m),v=r(72791),g=r(98422),h=r(1067),x=r(60090),w=r(46401),b=r(18111),I=r.n(b),Z=r(7229),C=r.n(Z),R=r(37481),U=r(80184),L="DraggableUploadList",j=function(e){var n=e.originNode,r=e.moveRow,t=e.file,o=e.fileList,a=e.locale,i=(0,v.useRef)(null),s=o.indexOf(t),u=(0,g.L)({accept:L,collect:function(e){var n=(e.getItem()||{}).index;return n===s?{}:{isOver:e.isOver(),dropClassName:n<s?" drop-over-downward":" drop-over-upward"}},drop:function(e){r(e.index,s)}}),d=(0,c.Z)(u,2),p=d[0],m=p.isOver,f=p.dropClassName,x=d[1],w=(0,h.c)({type:L,item:{index:s},collect:function(e){return{isDragging:e.isDragging()}}});x((0,(0,c.Z)(w,2)[1])(i));var b=(0,U.jsx)(l.Z,{title:a.errorToolTip,children:n.props.children});return(0,U.jsx)("div",{ref:i,className:"ant-upload-draggable-list-item ".concat(m?f:""),style:{cursor:"move"},children:"error"===t.status?b:n})};function y(e){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],t=decodeURIComponent(n[0].match(/;?name=(.*?);/)[1]),o=atob(n[1]),a=o.length,i=new Uint8Array(a);a--;)i[a]=o.charCodeAt(a);var c=new File([i],t,{type:r});return c.response=e,c.status="done",c}var N=function(e){var n=e.multiple,r=e.id,l=e.readonly,m=e.disabled,g=e.onChange,h=e.value,b=e.schema,Z=e.options,L=e.rawErrors,N=(0,(0,R.useLocaleStore)().getLocale)("FileWidget"),O=(0,v.useState)((h?n?h:[h]:[]).filter((function(e){return!!e})).map(y)),k=(0,c.Z)(O,2),D=k[0],E=k[1],F=D.length;(0,v.useEffect)((function(){if(!D.some((function(e){return"uploading"===e.status}))){var e=D.filter((function(e){return"done"===e.status})).map((function(e){return e.response})),r=(h?n?h:[h]:[]).filter((function(e){return!!e}));I()(r,e)||g(n?e:e[0])}}),[D,n,g,h]);var S=(0,v.useCallback)((function(e,n){var r=D[e];E(f()(D,{$splice:[[e,1],[n,0,r]]}))}),[D,E]),T={onRemove:function(e){var n=D.indexOf(e),r=D.slice();r.splice(n,1),E(r)},beforeUpload:function(e){var n=e.name.split("."),r=n[n.length-1].toLowerCase(),t=!(Z.accept&&Z.accept.length)||Z.accept.some((function(e){return r===e}));if(t)if(b.maxItems&&F>=b.maxItems){if(t=!1,F===b.maxItems){var o=b.maxItems;u.Z.error({message:N.errorNotUploaded,description:b.maxItems>1?C()(N.errorMaxItems,{maxItems:o}):N.errorOnlyOneItem,placement:"top"}),F++}}else D.some((function(n){return n.name===e.name}))&&(u.Z.error({message:N.errorNotUploaded,description:C()(N.errorSameFile,{filename:e.name}),placement:"top"}),t=!1);else{var a=Z.accept.map((function(e){return e.toUpperCase()})).join("/");u.Z.error({message:N.errorNotUploaded,description:C()(N.errorFileType,{fileTypes:a}),placement:"top"})}return t&&F++,t||d.Z.LIST_IGNORE},onDownload:function(e){var n=document.createElement("a");n.download=e.name,n.href=e.response;var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n.dispatchEvent(r),n.remove()},onChange:function(e){"done"===e.file.status&&E((function(n){var r=n.map((function(e){return e.uid})).indexOf(e.file.uid),t=n.slice();return t[r]=e.file,t}))},customRequest:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){var r,t,i,c,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.onProgress,t=n.onError,i=n.onSuccess,c=n.file,(s=new FileReader).readAsDataURL(c),s.onload=function(){var e=s.result.replace(";base64",";name=".concat(encodeURIComponent(c.name),";base64"));i(e)},s.onerror=function(e){return t(e)},s.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),r(e)},E((function(e){return[].concat((0,a.Z)(e),[c])})),e.abrupt("return",{abort:function(){s.abort()}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),showUploadList:{showDownloadIcon:!0,showRemoveIcon:!(l||m)},multiple:!!n,fileList:D};return Z.accept&&(T.accept=".".concat(Z.accept.join(",."))),n?(T.itemRender=function(e,n,r){return(0,U.jsx)(j,{locale:N,originNode:e,file:n,fileList:r,moveRow:S})},b.maxItems&&(T.maxCount=b.maxItems)):T.maxCount=1,(0,U.jsx)(x.W,{backend:w.PD,children:(0,U.jsx)(d.Z,(0,t.Z)((0,t.Z)({},T),{},{children:l||m?null:(0,U.jsx)(p.ZP,{icon:(0,U.jsx)(s.Z,{}),danger:!!L,children:N.dropMessage},r+"-Button")}),r+"-Upload")},r+"-DndProvider")}}}]);
//# sourceMappingURL=1357.29535474.chunk.js.map